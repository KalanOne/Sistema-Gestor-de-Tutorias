{% extends 'layout/basicCNMenu.html' %} {% load static %}{% block content %}
<div class="container">
  <div class="text">
    {% if sobrecargaGrupo == True %}
    <div class="d-grid gap-2 d-md-flex justify-content-md-end mb-3">
      <div class="row">
        <div class="col">
          <button type="button" class="btn btn-primary" id="liveToastBtn">
            Crear grupo <i class="bi bi-plus-circle"></i>
          </button>
        </div>
      </div>
    </div>
    <div class="toast-container position-fixed bottom-0 end-0 p-3" style="z-index: 100;">
      <div
        id="liveToast"
        class="toast"
        role="alert"
        aria-live="assertive"
        aria-atomic="true"
      >
        <div class="toast-header" style="background-color: #1b396a">
          <i class="bi bi-circle-fill" style="color: red"></i>
          <strong class="me-auto" style="color: white"> &nbsp;SGT</strong>
          <small style="color: white">Ahora</small>
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="toast"
            aria-label="Close"
          ></button>
        </div>
        <div class="toast-body">
          No se puede crear otro grupo, se ha alcanzado el l√≠mite
        </div>
      </div>
    </div>
    {% else %}
    <div class="d-grid gap-2 d-md-flex justify-content-md-end mb-3">
      <div class="row">
        <div class="col">
          <a href="{% url 'crearGrupo' tutor %}" class="btn btn-primary"
            >Crear grupo <i class="bi bi-plus-circle"></i
          ></a>
        </div>
      </div>
    </div>
    {% endif %}
  </div>

  {% if vacio == True %}
  <div class="container">
    <div class="row">
      <div class="col-1 col-md-3"></div>
      <div class="col-10 col-md-6 bg-light shadow p-3 mb-5 rounded">
        <h6 class="text-center">El tutor no tiene grupos registrados</h6>
      </div>
      <div class="col-1 col-md-3"></div>
    </div>
  </div>
  {% else %}
  <div class="table-resposive">
    <table class="table table-hover" id="tabla">
      <thead>
        <tr>
          <th scope="col">Grupo</th>
          <th scope="col">Tutor</th>
          <th scope="col">Institucion</th>
          <th scope="col">Estado</th>
          <th scope="col">Acciones</th>
        </tr>
      </thead>
      <tbody>
        {% for grupo in grupos %}
        <tr>
          <td>{{grupo.grupo}}</td>
          <td>
            {{grupo.idPersonalTec.user.first_name}}
            {{grupo.idPersonalTec.user.last_name}}
          </td>
          <td>{{grupo.idInstitucion.nombreInstitucion}}</td>
          <td>{{grupo.idEstado.estado}}</td>
          <td>
            <div class="row text">
              <div class="col">
                <a
                  class="mx-2"
                  href="{% url 'listarAlumnos' grupo.id%}"
                  style="text-decoration: none; color: black"
                >
                  <i class="bi bi-card-list"></i>
                </a>
                <a
                  class="mx-2"
                  href="#"
                  style="text-decoration: none; color: black"
                >
                  <i class="bi bi-pencil-square"></i>
                </a>
              </div>
            </div>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  {% endif %}


</div>
{% endblock content %} {% block JS %}
<script src="{% static 'JS/perfilTutorado.js' %}"></script>
<script>
  $("#tabla").DataTable({
    dom: "Bfrtip",
    lengthMenu: [
      [3, 5, 10, 25, 50, -1],
      ["3 rows", "5 rows", "10 rows", "25 rows", "50 rows", "Show all"],
    ],
    buttons: ["pageLength", "spacer", "print", "copy", "excel", "pdf"],
  });
</script>
{% endblock JS %}
